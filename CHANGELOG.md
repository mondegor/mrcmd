# Mrcmd Tool Changelog
Все изменения в Mrcmd будут документироваться на этой странице.

## 2024-09-28
### Changed
- В инструкцию по установке Ubuntu добавлены следующие описания:
    - Установка и настройка Go;
    - Связь хостовой машины с WSL;
- Поправлен `.editorconfig`, добавлены `*.proto`, `*.mk`;

## 2024-06-30
### Added
- Решена проблема поломки плагинов по внешним причинам (например, не установлена в системе нужная утилита).
  Для этого добавлен новый метод `canexec` для плагинов, в котором проверяются условия для работы плагина.
  Если они не выполняются, то плагин начинает работать в ограниченном режиме (он предоставляет пользоваться только его переменными);

### Changed
- Обновление README.md, WIN_WSL;
- `mrcore_lib_get_var_value` теперь возвращает значение переменной, если в качестве значения
  была указана действительно переменная, иначе просто возвращается указанное значение.
- Для некоторых конструкций if добавлены двойные квадратные скобочки: `[[`;

## 2023-11-19
### Changed
- Обновлён `.editorconfig`;

### Fixed
- В скрипте `register.bat` путь к Mrcmd оборачивается кавычками, для поддержки путей, содержащих пробелы;

## 2023-11-12
### Changed
- Условия if приведены к единому стилю;
- Подсветка флага true для глобальных переменных изменена на синий цвет;

## 2023-11-09
### Added
- Добавлена функция `mrcore_lib_is_array_empty`, которая проверяет, что массив пустой. При этом массив типа (0 => "") считается тоже пустым;

## 2023-08-05
### Fixed
- В документации: исправлен путь к картинкам, поправлены уровни заголовков;
- Добавлено пропущенное слово в картинке;

## 2023-07-16
### Fixed
- В инструкции для закачки файла через curl добавлен флаг `--ssl-no-revoke`, без него в некоторых Windows файлы не скачиваются;

## 2023-07-15
### Changed
- В функции `mrcore_dotenv_init_var()` переменные со значением NULL заменяются на пустую строку. Это сделано для того чтобы можно было отключать у переменной значение по умолчанию;

## 2023-06-17
### Fixed
- Добавлена правильная обработка пустого параметра `path` в функции `mrcmd_os_path`;
- При вызове `register.sh` устанавливаются права на исполнение файлу `cmd.sh`;

## 2023-06-16
### Added
- Добавлены функции `mrcore_tool_exists` и `mrcore_validate_tool_required` для проверки наличия указанной команды;

## 2023-06-14
### Changed
- Доработаны диаграммы отражающие архитектуру утилиты;

### Fixed
- Исправлена ошибка монтирования директорий в Windows, в связи с этим добавлены функции `mrcmd_os_realpath` и `mrcmd_os_path`;
- Доработан `register.bat`, который позволяет зарегистрировать утилиту в Windows глобально;

## 2023-06-12
### Added
- Добавлены константы `MRCORE_DOTENV_DEFAULT`, `MRCORE_DOTENV_EXPORTED`, `MRCMD_SHARED_PLUGINS_DIR_DEFAULT`;
- Добавлена команда `init`, которая инициализирует текущий проект (создаёт `.env` файл с настройками по умолчанию);
- Добавлена функция `mrcmd_plugins_lib_get_plugin_dir` для получения директории, где лежит плагин по его имени;
- Добавлены файлы `register.bat` и `register.sh` регистрации утилиты, для её использования в глобальном пространстве;

### Changed
- Обновлён экспорт переменных (`export-config`);
- Константы `MRCMD_PLUGINS_DIR` и `APPX_PLUGINS_DIR` теперь можно переопределять в `.env` файле;
- Переменную `MRCMD_CURRENT_PLUGINS_DIR` теперь можно использовать в методе инициализации плагинов (`mrcmd_plugins_{PLUGIN_NAME}_method_init`);
- Доработаны разделы команд `help` и `state`;

### Removed
- Удалена переменная `MRCMD_CURRENT_PLUGIN_NAME`;
- Удалена лишняя функция `mrcmd_plugins_load_init_methods`;

## 2023-05-27
### Added
- В функциях валидации разрешено задавать пустые параметры;
- В `.editorconfig` добавлены `xml`, `xslt`, `puml` форматы;

## 2023-05-21
### Added
- Добавлены функции: `mrcore_get_shell`, `mrcore_lib_flag_to_int`, `mrcore_lib_rm_resource`, `mrcore_lib_get_var_value`, `mrcore_os_path_win_to_unix`, `mrcore_validate_resource_required`;
- В `export_config` добавлена, в виде заголовка, информация о системных переменных в экспортируемый файл;
- Добавлена переменная `MRCMD_PLUGINS_DIR` и параметр `--shared-plugins-dir` для её внешнего управления;

### Changed
- Заменено у плагинов `NAME` -> `CAPTION`;
- Обновлён раздел команды `help`;
- Файл переименован и расширен: `tty.sh` -> `os.sh`;

### Fixed
- Исправлено несколько тестов;
- Добавлен отсутствующий оператор function у некоторых методов;

### Removed
- Удалён export в тех переменных, в которых он был не нужен;

## 2023-05-12
### Added
- Добавлена возможность экспорта переменных окружения (`export-config`, `mrcore_dotenv_export_var`);
- `MRCMD_PLUGIN_METHODS_SHOW_COMPLETED_ARRAY`;

### Changed
- `MRCMD_SYSTEM_PLUGIN_METHODS_ARRAY` -> `MRCMD_PLUGIN_METHODS_ARRAY`;
- `mrcmd_plugins_lib_get_plugin_var_value` -> `mrcmd_plugins_lib_get_plugin_var`;

### Fixed
- Добавлено отсутствующее объявление переменной pluginName;
- Опции утилиты теперь только можно добавлять перед командой и сразу после неё;
- Исправлена ошибка при формировании имени функции плагина;

### Removed
- `DEBUG_LEVEL_4`;

## 2023-05-01
### Fixed
- `pl` -> `pm`;

## 2023-04-23
### Added
- Добавлена поддержка загрузки плагинов с учётом их зависимости от других плагинов;
- Доработаны страницы `help`, `config`, `state`;
- Добавлены новые методы `start`, `stop`;
- Добавлены новые тесты кода;

### Changed
- Произведён рефакторинг кода;